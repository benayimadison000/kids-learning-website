<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Letter Stars Game</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background: radial-gradient(circle, #e0f7fa 0%, #80deea 100%);
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* 1. STAR COUNTER STYLING */
        #star-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .star-slot {
            font-size: 50px;
            color: rgba(255, 255, 255, 0.4); /* Empty star color */
            text-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .star-active {
            color: #ffeb3b; /* Shiny gold */
            text-shadow: 0 0 15px #fdd835, 2px 2px 0 #f57f17;
            transform: scale(1.2);
        }

        #status-text {
            color: #006064;
            font-size: 32px;
            margin-bottom: 20px;
            min-height: 40px;
        }

        /* 2. GAME BOARD */
        #game-board {
            display: flex;
            gap: 20px;
            padding: 20px;
        }

        .letter-card {
            background: white;
            border-radius: 30px;
            width: 130px;
            height: 170px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 90px;
            font-weight: bold;
            color: #37474f;
            box-shadow: 0 10px 0 #b0bec5;
            cursor: pointer;
            transition: transform 0.1s;
            user-select: none;
            border: 5px solid white;
        }

        /* 3. ANIMATIONS */
        @keyframes winnerBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2) rotate(5deg); }
        }

        .correct {
            animation: winnerBounce 0.9s ease 5;
            background: #b9f6ca;
            border-color: #00c853;
            color: #1b5e20;
        }

        .shake {
            animation: shakeAnim 0.9s ease;
        }

        @keyframes shakeAnim {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        /* 4. OVERLAYS & BUTTONS */
        #overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: white; display: flex; align-items: center; justify-content: center; z-index: 100;
        }

        .btn-play {
            background: #ff4081; color: white; border: none; padding: 20px 50px;
            font-size: 30px; border-radius: 50px; cursor: pointer; box-shadow: 0 8px 0 #c2185b;
        }

        #repeat-btn {
            margin-top: 30px; background: #0288d1; color: white; border: none;
            padding: 15px 30px; border-radius: 30px; font-size: 20px; cursor: pointer;
            box-shadow: 0 5px 0 #01579b;
        }

        .particle {
            position: absolute; width: 12px; height: 12px; border-radius: 50%; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="overlay">
        <button class="btn-play" onclick="startGame()">Start Game! ðŸŽ¨</button>
    </div>

    <div id="star-container">
        <div class="star-slot">â˜…</div>
        <div class="star-slot">â˜…</div>
        <div class="star-slot">â˜…</div>
        <div class="star-slot">â˜…</div>
        <div class="star-slot">â˜…</div>
    </div>

    <div id="status-text">Ready to play?</div>

    <div id="game-board"></div>

    <button id="repeat-btn" onclick="sayPrompt()">ðŸ”Š Repeat Letter</button>

    <script>
        const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
        let currentLetter = "";
        let score = 0;
        let isWaiting = false;

        function startGame() {
            document.getElementById('overlay').style.display = 'none';
            // Prime voice for mobile
            window.speechSynthesis.speak(new SpeechSynthesisUtterance(""));
            nextRound();
        }

        function nextRound() {
            isWaiting = false;
            const board = document.getElementById('game-board');
            board.innerHTML = '';
            document.getElementById('status-text').innerText = "Find the letter...";

            // Pick 3 random letters, ensure target is one of them
            currentLetter = alphabet[Math.floor(Math.random() * alphabet.length)];
            let choices = [currentLetter];
            while(choices.length < 3) {
                let r = alphabet[Math.floor(Math.random() * alphabet.length)];
                if(!choices.includes(r)) choices.push(r);
            }
            choices.sort(() => Math.random() - 0.5);

            choices.forEach(char => {
                const card = document.createElement('div');
                card.className = 'letter-card';
                card.innerText = char;
                card.onclick = () => checkLetter(char, card);
                board.appendChild(card);
            });

            sayPrompt();
        }

        function checkLetter(selected, el) {
            if(isWaiting) return;

            if(selected === currentLetter) {
                isWaiting = true;
                score++;
                el.classList.add('correct');
                updateStars();
                
                // Celebration
                createBurst(el);
                speak(`Ta-da! You found it! This is the letter ${currentLetter}.`);
                document.getElementById('status-text').innerText = "GREAT JOB!";

                // Check for 5-star reset
                if(score >= 5) {
                    setTimeout(() => {
                        speak("Wow! Five stars! You are an alphabet superstar!");
                        score = 0;
                        updateStars(true);
                    }, 1000);
                }

                // 3 Second delay before next letters
                setTimeout(nextRound, 5000);
            } else {
                el.classList.add('shake');
                speak("Not that one. Keep looking!");
                setTimeout(() => el.classList.remove('shake'), 700);
            }
        }

        function updateStars(reset = false) {
            const starSlots = document.querySelectorAll('.star-slot');
            starSlots.forEach((slot, index) => {
                if(!reset && index < score) {
                    slot.classList.add('star-active');
                } else {
                    slot.classList.remove('star-active');
                }
            });
        }

        function speak(text) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            const voices = window.speechSynthesis.getVoices();
            
            // Filter for high-quality female voice
            const female = voices.find(v => 
                v.name.includes("Samantha") || 
                v.name.includes("Google US English") || 
                v.name.includes("Zira") ||
                v.name.includes("Female")
            );

            if (female) msg.voice = female;
            msg.pitch = 1.4; // High energy
            msg.rate = 0.85; // Clear speed
            window.speechSynthesis.speak(msg);
        }

        function sayPrompt() {
            if(!isWaiting) speak(`Can you find the letter ${currentLetter}?`);
        }

        function createBurst(el) {
            const rect = el.getBoundingClientRect();
            for (let i = 0; i < 50; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                p.style.left = (rect.left + rect.width / 2) + 'px';
                p.style.top = (rect.top + rect.height / 2) + 'px';
                document.body.appendChild(p);

                const angle = Math.random() * Math.PI * 2;
                const dist = 150 + Math.random() * 200;
                const tx = Math.cos(angle) * dist;
                const ty = Math.sin(angle) * dist;

                p.animate([
                    { transform: 'translate(-50%, -50%) scale(1)', opacity: 1 },
                    { transform: `translate(${tx}px, ${ty}px) scale(0)`, opacity: 0 }
                ], {
                    duration: 1200,
                    easing: 'ease-out'
                }).onfinish = () => p.remove();
            }
        }

        window.speechSynthesis.onvoiceschanged = () => {};
    </script>
</body>
</html>