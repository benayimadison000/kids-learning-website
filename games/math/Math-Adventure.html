<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Adventure Game</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.5s;
        }
        /* Custom styles for the input and focus state */
        .math-input {
            border: 3px solid #6366f1; /* Indigo-500 border */
            text-align: center;
            font-size: 3rem; /* text-5xl equivalent */
            width: 120px;
            height: 80px;
        }
        .math-input:focus {
            outline: none;
            border-color: #4f46e5; /* Indigo-600 focus */
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.5); /* Custom focus ring */
        }
        .correct-feedback {
            transform: scale(1.1);
            transition: transform 0.3s;
        }
        .incorrect-feedback {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% {transform: translateX(0);}
            20%, 60% {transform: translateX(-10px);}
            40%, 80% {transform: translateX(10px);}
        }
    </style>
</head>
<body class="bg-blue-50 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-2xl bg-white p-8 md:p-12 rounded-3xl shadow-2xl transition-all duration-500">
        
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-extrabold text-indigo-700">Math Adventure! üöÄ</h1>
            <p class="text-xl text-gray-500 mt-2">Group <span id="group-number">1</span> of 10</p>
        </header>

        <!-- Scoreboard & Progress -->
        <div class="flex justify-between items-center mb-8 text-xl font-semibold text-gray-700">
            <div class="flex items-center space-x-2">
                <span class="text-green-600">Score:</span>
                <span id="current-score" class="text-2xl text-green-700">0</span> / 50
            </div>
            <div class="flex items-center space-x-2">
                <span class="text-indigo-600">Question:</span>
                <span id="q-counter" class="text-2xl text-indigo-700">1</span> / 50
            </div>
        </div>

        <!-- Main Game Area -->
        <div id="quiz-area" class="text-center">

            <!-- Math Problem Display -->
            <div id="question-display" class="flex justify-center items-center space-x-4 mb-8">
                <span id="num1" class="text-6xl font-bold text-gray-800">5</span>
                <span id="operator" class="text-5xl font-extrabold text-pink-600">+</span>
                <span id="num2" class="text-6xl font-bold text-gray-800">3</span>
                <span class="text-6xl font-extrabold text-pink-600">=</span>
                <input type="number" id="answer-input" class="math-input rounded-xl focus:ring-indigo-500 focus:border-indigo-500" placeholder="?" inputmode="numeric">
            </div>

            <!-- Feedback Message -->
            <div id="feedback-message" class="h-10 text-xl font-semibold mb-8"></div>

            <!-- Action Button -->
            <button id="check-button" onclick="checkAnswer()" class="w-full md:w-auto px-10 py-4 bg-indigo-600 text-white text-2xl font-bold rounded-xl shadow-lg hover:bg-indigo-700 transition duration-150 transform hover:scale-105">
                Check Answer!
            </button>

        </div>

        <!-- Finish/Reset Area (Hidden initially) -->
        <div id="finish-area" class="text-center hidden">
            <h2 id="final-message" class="text-5xl font-black text-indigo-700 mb-6"></h2>
            <p class="text-3xl text-gray-700 mb-8">
                Your final score is: <span id="final-score" class="text-green-600 font-extrabold text-4xl">0</span> / 50
            </p>
            <button onclick="initGame()" class="w-full md:w-auto px-10 py-4 bg-green-600 text-white text-2xl font-bold rounded-xl shadow-lg hover:bg-green-700 transition duration-150 transform hover:scale-105">
                Play Again!
            </button>
        </div>

    </div>

    <script>
        // --- 1. GAME DATA (50 Questions in 10 Groups) ---
        // Simple addition and subtraction up to 20, suitable for 1st grade.
        const QUESTIONS = [
            // Group 1: Simple Addition to 10
            [{n1: 3, op: '+', n2: 5}, {n1: 6, op: '+', n2: 2}, {n1: 1, op: '+', n2: 8}, {n1: 4, op: '+', n2: 4}, {n1: 7, op: '+', n2: 1}],
            // Group 2: Simple Subtraction within 10
            [{n1: 9, op: '-', n2: 3}, {n1: 7, op: '-', n2: 5}, {n1: 10, op: '-', n2: 1}, {n1: 6, op: '-', n2: 0}, {n1: 8, op: '-', n2: 4}],
            // Group 3: Mixed within 10
            [{n1: 2, op: '+', n2: 7}, {n1: 10, op: '-', n2: 7}, {n1: 4, op: '+', n2: 3}, {n1: 5, op: '-', n2: 2}, {n1: 1, op: '+', n2: 9}],
            // Group 4: Addition crossing 10 (Result up to 15)
            [{n1: 8, op: '+', n2: 4}, {n1: 9, op: '+', n2: 3}, {n1: 7, op: '+', n2: 6}, {n1: 6, op: '+', n2: 8}, {n1: 5, op: '+', n2: 9}],
            // Group 5: Subtraction from 10-15
            [{n1: 12, op: '-', n2: 5}, {n1: 14, op: '-', n2: 8}, {n1: 11, op: '-', n2: 3}, {n1: 15, op: '-', n2: 6}, {n1: 13, op: '-', n2: 7}],
            // Group 6: Mixed up to 15
            [{n1: 9, op: '+', n2: 5}, {n1: 13, op: '-', n2: 4}, {n1: 6, op: '+', n2: 7}, {n1: 11, op: '-', n2: 6}, {n1: 8, op: '+', n2: 3}],
            // Group 7: Addition crossing 10 (Result up to 20)
            [{n1: 10, op: '+', n2: 8}, {n1: 9, op: '+', n2: 9}, {n1: 11, op: '+', n2: 7}, {n1: 12, op: '+', n2: 5}, {n1: 8, op: '+', n2: 10}],
            // Group 8: Subtraction from 15-20
            [{n1: 18, op: '-', n2: 9}, {n1: 20, op: '-', n2: 11}, {n1: 17, op: '-', n2: 8}, {n1: 19, op: '-', n2: 5}, {n1: 16, op: '-', n2: 7}],
            // Group 9: Mixed up to 20
            [{n1: 15, op: '+', n2: 4}, {n1: 16, op: '-', n2: 8}, {n1: 7, op: '+', n2: 12}, {n1: 18, op: '-', n2: 6}, {n1: 9, op: '+', n2: 8}],
            // Group 10: Challenge Mixed up to 20
            [{n1: 14, op: '+', n2: 6}, {n1: 20, op: '-', n2: 4}, {n1: 17, op: '-', n2: 9}, {n1: 12, op: '+', n2: 7}, {n1: 15, op: '-', n2: 3}]
        ];
        
        const TOTAL_GROUPS = QUESTIONS.length;
        const Q_PER_GROUP = QUESTIONS[0].length;
        const TOTAL_QUESTIONS = TOTAL_GROUPS * Q_PER_GROUP;

        // --- 2. GAME STATE ---
        let currentGroup = 0;
        let currentQIndex = 0;
        let score = 0;
        let correctAnswer = 0;

        // --- 3. DOM ELEMENTS ---
        const $groupNum = document.getElementById('group-number');
        const $qCounter = document.getElementById('q-counter');
        const $score = document.getElementById('current-score');
        const $num1 = document.getElementById('num1');
        const $operator = document.getElementById('operator');
        const $num2 = document.getElementById('num2');
        const $answerInput = document.getElementById('answer-input');
        const $feedback = document.getElementById('feedback-message');
        const $checkButton = document.getElementById('check-button');
        const $quizArea = document.getElementById('quiz-area');
        const $finishArea = document.getElementById('finish-area');
        const $finalScore = document.getElementById('final-score');
        const $finalMessage = document.getElementById('final-message');
        const $gameContainer = document.getElementById('game-container');


        // --- 4. GAME FUNCTIONS ---

        /** Calculates the correct answer for the current question. */
        function calculateAnswer(q) {
            return q.op === '+' ? q.n1 + q.n2 : q.n1 - q.n2;
        }

        /** Updates the display with the current question details. */
        function loadQuestion() {
            // Guard clause to prevent loading if game is over
            if (currentGroup >= TOTAL_GROUPS) return endGame();

            const currentQData = QUESTIONS[currentGroup][currentQIndex];
            
            // Calculate and store the correct answer
            correctAnswer = calculateAnswer(currentQData);

            // Update DOM elements
            $num1.textContent = currentQData.n1;
            $operator.textContent = currentQData.op;
            $num2.textContent = currentQData.n2;
            
            $groupNum.textContent = currentGroup + 1;
            $qCounter.textContent = (currentGroup * Q_PER_GROUP) + currentQIndex + 1;
            $answerInput.value = '';
            $answerInput.focus();
            
            // Reset feedback
            $feedback.textContent = '';
            $feedback.className = 'h-10 text-xl font-semibold mb-8'; // Reset classes
            $checkButton.textContent = 'Check Answer!';
            $checkButton.onclick = checkAnswer;
            $checkButton.classList.remove('bg-green-600', 'hover:bg-green-700', 'bg-red-600', 'hover:bg-red-700');
            $checkButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
            
            // Update container color slightly based on group difficulty
            const colorScale = ['blue', 'cyan', 'emerald', 'teal', 'lime', 'yellow', 'orange', 'red', 'pink', 'purple'];
            $gameContainer.classList.remove(...colorScale.map(c => `shadow-2xl`));
            $gameContainer.classList.add(`shadow-lg`);
        }

        /** Checks the user's input against the correct answer. */
        function checkAnswer() {
            const userAnswer = parseInt($answerInput.value);
            
            if (isNaN(userAnswer)) {
                $feedback.textContent = 'Please enter a number.';
                $feedback.classList.add('text-red-600');
                $answerInput.classList.add('incorrect-feedback');
                setTimeout(() => $answerInput.classList.remove('incorrect-feedback'), 500);
                return;
            }

            if (userAnswer === correctAnswer) {
                // Correct Answer
                score++;
                $score.textContent = score;
                $feedback.textContent = '‚úÖ Great Job! Correct!';
                $feedback.className = 'h-10 text-2xl font-black mb-8 text-green-600 correct-feedback';
                
                // Change button to 'Next Question'
                $checkButton.textContent = 'Next Question ‚ñ∂Ô∏è';
                $checkButton.onclick = nextQuestion;
                $checkButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                $checkButton.classList.add('bg-green-600', 'hover:bg-green-700');
                
            } else {
                // Incorrect Answer
                $feedback.textContent = `‚ùå Try again! The correct answer is ${correctAnswer}.`;
                $feedback.className = 'h-10 text-xl font-semibold mb-8 text-red-600 incorrect-feedback';
                $answerInput.classList.add('incorrect-feedback');
                setTimeout(() => $answerInput.classList.remove('incorrect-feedback'), 500);
                
                // Change button to 'Continue' to prevent retries
                $checkButton.textContent = 'Continue ‚ñ∂Ô∏è';
                $checkButton.onclick = nextQuestion;
                $checkButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                $checkButton.classList.add('bg-red-600', 'hover:bg-red-700');
            }
        }

        /** Advances to the next question or the next group. */
        function nextQuestion() {
            // Check if we are at the end of the current group
            if (currentQIndex < Q_PER_GROUP - 1) {
                currentQIndex++; // Move to next question in the group
            } else {
                currentGroup++; // Move to next group
                currentQIndex = 0; // Reset question index
            }

            // Check if all groups are completed
            if (currentGroup >= TOTAL_GROUPS) {
                endGame();
            } else {
                loadQuestion();
            }
        }
        
        /** Displays the final score and message. */
        function endGame() {
            $quizArea.classList.add('hidden');
            $finishArea.classList.remove('hidden');
            $finalScore.textContent = score;
            
            let message = '';
            if (score === TOTAL_QUESTIONS) {
                message = "üèÜ Perfect Score! You're a Math Star! üåü";
            } else if (score >= TOTAL_QUESTIONS * 0.8) {
                message = "üéâ Excellent Work! You crushed it! üß†";
            } else if (score >= TOTAL_QUESTIONS * 0.5) {
                message = "üëç Good Effort! Keep practicing! üí™";
            } else {
                message = "Try Again! Every try makes you better! ‚úèÔ∏è";
            }
            $finalMessage.textContent = message;

            // Update page background for a celebration feel
            document.body.classList.remove('bg-blue-50');
            document.body.classList.add('bg-green-100');
            $gameContainer.classList.remove('shadow-2xl');
            $gameContainer.classList.add('shadow-3xl', 'bg-yellow-50');
        }

        /** Resets the game state and starts the first question. */
        function initGame() {
            currentGroup = 0;
            currentQIndex = 0;
            score = 0;
            $score.textContent = score;
            
            $finishArea.classList.add('hidden');
            $quizArea.classList.remove('hidden');
            document.body.classList.remove('bg-green-100');
            document.body.classList.add('bg-blue-50');
            $gameContainer.classList.remove('shadow-3xl', 'bg-yellow-50');
            $gameContainer.classList.add('shadow-2xl');

            loadQuestion();
        }

        // Handle Enter key press on the input field
        $answerInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                // Check if the button is 'Check Answer!' or 'Next Question'/'Continue'
                if ($checkButton.onclick.name === 'checkAnswer') {
                    checkAnswer();
                } else if ($checkButton.onclick.name === 'nextQuestion') {
                    nextQuestion();
                }
            }
        });


        // Initialize the game when the page loads
        window.onload = initGame;
    </script>
</body>
</html>